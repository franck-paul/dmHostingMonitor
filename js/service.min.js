"use strict";dotclear.dmHostingMonitorPing=()=>{const t=(t=!1)=>{const o=$("#content h2 a img").length?$("#content h2 a img"):$("#content h2 img");-1===$("body").data("server")&&o.length&&o.prop("alt").length&&(dotclear.dmHostingMonitor_Alt=`${o.prop("alt")} : `),dotclear.dmHostingMonitor_Alt=dotclear.dmHostingMonitor_Alt??"",$("body").css("filter",t?"":"grayscale(1)");const e=`${dotclear.dmHostingMonitor_Alt+(t?dotclear.dmHostingMonitor_Online:dotclear.dmHostingMonitor_Offline)} (${(new Date).toLocaleString()})`;o.length&&o.prop("alt",e),"function"==typeof notifyBrowser&&(t&&0===$("body").data("server")||!t&&1===$("body").data("server"))&&notifyBrowser(e),$("body").data("server",t?1:0),o.prop("title",o.prop("alt"))};dotclear.jsonServices("dmHelperPing",(o=>{t(o.ret)}),(o=>{dotclear?.debug&&console.log(o),t(!1)}))},$((()=>{Object.assign(dotclear,dotclear.getData("dm_hostingmonitor")),dotclear.dmHostingMonitor_Ping&&($("body").data("server",-1),dotclear.dmHostingMonitorPing(),dotclear.dmHostingMonitor_Timer=setInterval(dotclear.dmHostingMonitorPing,1e3*(dotclear.dmHostingMonitor_Interval||300)))}));
